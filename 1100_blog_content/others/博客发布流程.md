---
{"title":"åšå®¢å‘å¸ƒæµç¨‹","description":"ä½¿ç”¨quartzå‘å¸ƒobsidianåˆ°githubpage","dg-publish":true,"dg-path":null,"date":"2024-03-22 15:43:38","updated":"2024-03-23 20:19:49"}
---

> åŸºäº[quartz](https://quartz.jzhao.xyz/)å’Œ[ccm-publisher](https://github.com/CatCodeMe/ccm-publisher)æ’ä»¶ï¼Œå‘å¸ƒobsidianç¬”è®°åˆ°github pages
> - ä½¿ç”¨`submodule`ï¼Œä½¿å¾—ç¼–è¯‘å’Œå‘å¸ƒåšå®¢å†…å®¹å®Œå…¨åˆ†ç¦»ï¼Œæ›´åŠ è‡ªç”±å’Œæ–¹ä¾¿

# å‰ç½®çŸ¥è¯†
- githubçš„åŸºæœ¬æ“ä½œ
- gitçš„åŸºæœ¬æ“ä½œ
# æ“ä½œæ­¥éª¤
1. å‡†å¤‡Quartzç¯å¢ƒï¼Œå‚è€ƒ [Quartz: Get Started](https://quartz.jzhao.xyz/)
2. åˆå§‹åŒ–è‡ªå·±çš„Quartzç¼–è¯‘åº“ï¼Œè¿™é‡Œåº”è¯¥æ˜¯å«`yourname.github.io`, æ›¿æ¢`yourname`ä¸ºä½ è‡ªå·±çš„githubè´¦å·åç§°
	- å‚è€ƒ [Quartz: Setting up your GitHub repository](https://quartz.jzhao.xyz/setting-up-your-GitHub-repository)
	- åˆ°ç›®å‰ä¸ºæ­¢, åœ¨æœ¬åœ°è¿è¡Œ`git remote -v `,å°†ä¼šå¾—åˆ°ä¸‹é¢çš„ç»“æœ
		- quart_demo[^1] (å…¶ä¸­quartz_demoæ˜¯ä¸¾ä¾‹è¯´æ˜, ä½ è‡ªå·±è¿è¡Œçš„è¯åº”è¯¥æ˜¯`yourname`) 
	```shell
	$ git remote -v
	# quartz_demo æ›¿æ¢æˆä½ è‡ªå·±çš„ yourname.github.io
	origin	git@github.com:CatCodeMe/quartz_demo.git (fetch)
	origin	git@github.com:CatCodeMe/quartz_demo.git (push)
	upstream	https://github.com/jackyzha0/quartz.git (fetch)
	upstream	https://github.com/jackyzha0/quartz.git (push)
	```
3. åˆ°è¿™ä¸€æ­¥å¼€å§‹, è·Ÿå®˜æ–¹ä½¿ç”¨çš„å•åº“å‘å¸ƒæ–¹å¼åŒºåˆ«å¼€æ¥, æˆ‘ä»¬ä½¿ç”¨`submodule`
	-  **åç»­çš„æ­¥éª¤çš„é…ç½®é¡¹æœ‰å¼ºå…³è”**
4. ğŸ“è®¾ç½®quartzç¼–è¯‘ä»“åº“çš„action
5. å¯¹äºæ–°æ‰‹å¯ä»¥å‚è€ƒåç»­çš„æ­¥éª¤, ç†Ÿæ‚‰æ“ä½œçš„è¯å¯ä»¥ç›´æ¥å‚è€ƒå¹¶è°ƒæ•´è¿™ä¸ª[actioné…ç½®](https://github.com/CatCodeMe/blog_from_obsidian/blob/main/.github/workflows/deploy.yml)
6. è·Ÿä¹‹å‰çš„æ­¥éª¤ä¸€æ ·ï¼Œåœ¨githubåˆå§‹åŒ–**å¦ä¸€ä¸ªç©ºçš„ä»“åº“**, ç”¨äºä¸Šä¼ ä½ çš„obsidianç¬”è®°ï¼Œå‡å¦‚å«`content_demo`[^2]
	- è¿™é‡Œåªéœ€è¦åˆå§‹åŒ–,ä¸éœ€è¦å…¶ä»–æ“ä½œï¼Œåƒè¿™æ ·
	![20240322-publish_init_content.png](img/user/999_repository/20240322-publish_init_content.png)
7. å»ºå¥½ä¹‹åï¼Œå¯ä»¥ç›´æ¥åœ¨github, å¦‚æœå–œæ¬¢gitå®¢æˆ·ç«¯å·¥å…·ä¹Ÿå¯ä»¥cloneåˆ°æœ¬åœ°å†æ“ä½œã€‚æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼ˆç‚¹å‡»ä¸Šå›¾çš„`create a new file`è“è‰²é“¾æ¥å³å¯ï¼‰, å«`.github/workflows/deploy.yml`
	-  **æ–‡ä»¶å¤¹è·¯å¾„å¿…é¡»æ˜¯ `.github/workflows `, æ–‡ä»¶åç¼€å¿…é¡»æ˜¯`.yml`**, æ–‡ä»¶åæ²¡æœ‰è¦æ±‚ï¼Œåªè¦ç¬¦åˆgithubè¦æ±‚å³å¯
	- `deploy.yml` çš„æ–‡ä»¶å†…å®¹ï¼Œå¯ä»¥å‚è€ƒè¿™é‡Œ [deploy.yml](https://github.com/CatCodeMe/blog_from_obsidian/blob/d22e549cb735fa12f600985002ecf71e4348d1af/.github/workflows/deploy.yml) ï¼›å¤åˆ¶å¹¶ä¿®æ”¹å¥½å†…å®¹åï¼Œç‚¹å‡»å³ä¸Šè§’çš„`commit` æŒ‰é’®ï¼Œå³å¯ä¿å­˜å½“å‰æ–‡ä»¶
	 ![20240322-publish_zh_yml.png](img/user/999_repository/20240322-publish_zh_yml.png)
	 - `repo` é€‰é¡¹æ›¿æ¢æˆæ­¥éª¤2ä¸­åç§°ï¼Œç»“æ„æ˜¯`yourname/yourname.github.io`
	 - `token` é€‰é¡¹æ˜¯githubçš„é‰´æƒtokenï¼Œä½¿ç”¨æ—¶è¦æ³¨æ„
		 1. `${{ secrets.gh_action_token_PAT}}` è¿™ä¸ªè®¾ç½®é‡Œï¼Œ`gh_action_token_PAT` æ˜¯è‡ªå®šä¹‰çš„tokenåç§°ï¼Œå¯ä»¥è‡ªè¡Œå†³å®šï¼Œæœ€å¥½ä¸è¦æ˜¯ä¸­æ–‡ï¼Œç©ºæ ¼ã€‚
		 2. åœ¨[è¿™é‡Œ](https://github.com/settings/tokens?type=beta)ç”Ÿæˆtoken ï¼ˆæœ€å¥½æ˜¯åœ¨æµè§ˆå™¨çš„æ–°æ ‡ç­¾é¡µæ‰“å¼€ï¼Œä¼šæ–¹ä¾¿å¾ˆå¤šï¼‰
			![20240323-publish_start_generate_token.png](img/user/999_repository/20240323-publish_start_generate_token.png)
		 3. é€‰æ‹©è¯¥tokenå¯ä»¥ä½¿ç”¨çš„ä»“åº“
		 ![20240322-publish_select_repo.png](img/user/999_repository/20240322-publish_select_repo.png)
		 3. è®¾ç½®tokenæƒé™ï¼Œå½“å‰é¡µé¢ä¸‹æ»‘å³å¯; å±•å¼€ `Repository permissions` ï¼Œæ‰¾åˆ° `Actions` å’Œ `Contents` ä¸¤ä¸ªé€‰é¡¹ï¼ŒAccess éƒ½è®¾ç½®ä¸º `Read and write`
		 4. ç‚¹å‡» `generate token`ï¼Œï¼ˆâ—ï¸**å…ˆå¤åˆ¶å¹¶ä¿å­˜è¿™ä¸ªç”Ÿæˆçš„tokenåˆ°å…¶ä»–åœ°æ–¹ï¼Œåç»­éœ€è¦ä½¿ç”¨**. å¦‚æœå¿˜è®°äº†ï¼Œå¯ä»¥é‡æ–°æ‰§è¡Œä¸Šè¾¹çš„3æ­¥ï¼Œå†ç”Ÿæˆä¸€ä¸ªæ–°tokenå³å¯ï¼‰
		 5. å¤åˆ¶å¥½ä¹‹åå¯ä»¥åˆ·æ–°æˆ–è€…å†æ¬¡ç‚¹å‡»å·¦ä¾§å¯¼èˆªæ è¿›å…¥`Fine grained tokens` é¡µé¢ï¼Œé€‰æ‹©å¹¶ç‚¹å‡»åˆšæ‰çš„ç”Ÿæˆtokenï¼Œå¯ä»¥çœ‹åˆ°ç±»ä¼¼ä¸‹å›¾çš„æ•ˆæœ
			![20240322-publish_token_setting.png](img/user/999_repository/20240322-publish_token_setting.png)
			
		6. å›åˆ°åˆšæ‰ç”Ÿæˆçš„ä»“åº“`content_demo`é¦–é¡µ, ç‚¹å‡» `settings` é€‰é¡¹å¡ï¼Œè¿›å…¥è®¾ç½®é¡µé¢ï¼Œä¸ºå½“å‰ä»“åº“æ·»åŠ åˆšæ‰ç”Ÿæˆçš„tokenæˆæƒ, ç‚¹å‡»`New repository secret`æŒ‰é’®
			![20240322-publish_add_token_repo.png](img/user/999_repository/20240322-publish_add_token_repo.png)
		 7. æ¥ä¸‹æ¥æ·»åŠ token, **éœ€è¦æ³¨æ„**
			 1. `Name` **å¿…é¡»å’Œæ­¥éª¤1ä¸­`gh_action_token_PAT` è¿™ä¸ªåç§°ä¿æŒä¸€è‡´**, å½“ç„¶ä½ è¦æ˜¯ä½¿ç”¨çš„å…¶ä»–åç§°ï¼Œé‚£ä¹ˆä¿®æ”¹`.github/workflows/deploy.yml `çš„é…ç½®å’Œè¿™é‡Œçš„`Name`ä¸€æ ·å°±å¯ä»¥äº†
			 2. `Secret`å°±æ˜¯åˆšæ‰å¤åˆ¶å¹¶ä¿å­˜çš„token
			 3. è®¾ç½®å¥½åç‚¹å‡»`Add secret `ä¿å­˜å³å¯
		 ![20240322-publish_add_token_repo_2.png](img/user/999_repository/20240322-publish_add_token_repo_2.png)
		8. åˆ°è¿™é‡Œï¼Œå½“å‰ä»“åº“çš„actionå°±é…ç½®å¥½äº†ã€‚æ­¤æ—¶ï¼Œè¿™ä¸ªä»“åº“åº”è¯¥æ˜¯è¿™æ ·çš„ç»“æ„
			![20240322-publish_content_repo_demo.png](img/user/999_repository/20240322-publish_content_repo_demo.png)
8. è®¾ç½®quartzç¼–è¯‘ä»“åº“çš„action, 

# issues
- ctime, utime

[^1]: [quartz_demo repo](https://github.com/CatCodeMe/quartz_demo)
[^2]: [content_demo repo](https://github.com/CatCodeMe/content_demo.git)